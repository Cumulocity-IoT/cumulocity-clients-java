FROM buildpack-deps:stretch-scm
ENV SDKMAN_DIR /usr/local/sdkman
RUN apt-get update \
      && apt-get upgrade -y \
      && apt-get install -y sudo libltdl-dev rpm openssh-client openssl gnupg git curl zip unzip
RUN curl -s "https://get.sdkman.io" | bash \
      && bash -c 'source "$SDKMAN_DIR/bin/sdkman-init.sh" && sdk install java 8.0.242-zulu'\
      && rm -rf /var/lib/apt/lists/*
RUN apt-get clean
RUN git config --global user.email "jenkins@jenkins.cumulocity.com"
RUN git config --global user.name "jenkins"
ENV MAVEN_OPTS="-Xms1024m -Xmx4096m -XX:MaxMetaspaceSize=1024m -XX:+TieredCompilation -XX:TieredStopAtLevel=1 -Dhttps.protocols=TLSv1.2"
ENV JAVA_HOME="$SDKMAN_DIR/candidates/java/current"
ENV LANG C.UTF-8
